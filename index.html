<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Mapa Indiana Jones</title>
<style>
  /* ====== ESTILOS BASE ====== */
  html, body {margin:0;padding:0;height:100%;font-family: "Helvetica Neue", Arial, sans-serif;background:#6a583f;}
  .wrap{display:flex;align-items:center;justify-content:center;height:100%;position:relative;}
  .map-container{
    width:90vw; max-width:960px; aspect-ratio:16/10; position:relative;
    background:#f0e2c8; border-radius:12px; overflow:hidden;
    box-shadow: 0 20px 40px rgba(0,0,0,0.5), inset 0 2px 0 rgba(255,255,255,0.3);
  }

  /* papel viejo */
  .map-container::before{
    content:"";position:absolute;inset:0;
    background-image:
      radial-gradient(circle at 10% 10%, rgba(0,0,0,0.03) 0 1px, transparent 2px),
      radial-gradient(circle at 90% 80%, rgba(0,0,0,0.02) 0 1px, transparent 2px),
      repeating-linear-gradient(90deg, rgba(0,0,0,0.01) 0 1px, transparent 1px 40px);
    mix-blend-mode:multiply;opacity:0.6;pointer-events:none;
  }

  .title{position:absolute;top:12px;left:16px;color:#6b3f1f;font-weight:700;font-size:18px;letter-spacing:0.05em;text-shadow:0 1px 0 rgba(255,255,255,0.6);}
  .instructions{
    position:absolute;inset:0;background:rgba(0,0,0,0.65);color:#fff;display:flex;align-items:center;justify-content:center;
    flex-direction:column;text-align:center;padding:20px;z-index:5;
  }
  .instructions p{margin-bottom:18px;font-size:16px;}
  .start-btn{padding:12px 20px;background:#6b3f1f;color:#fff;border:none;border-radius:8px;font-weight:700;font-size:16px;cursor:pointer;}
  .start-btn:hover{background:#7c4b22;}

  /* hotspots */
  .hotspot{
    position:absolute;width:40px;height:40px;transform:translate(-50%,-50%);cursor:pointer;display:flex;align-items:center;justify-content:center;
    border-radius:50%;font-weight:900;font-size:22px;color:#6b3f1f;text-shadow:0 2px 0 rgba(255,255,255,0.35);transition:0.2s;
  }
  .hotspot.found{transform:translate(-50%,-50%) scale(1.3);}
  .hotspot.wrong{animation:shake 0.3s;}
  @keyframes shake{
    0%{transform:translate(-50%,-50%) rotate(0deg);}
    25%{transform:translate(-50%,-50%) rotate(-10deg);}
    50%{transform:translate(-50%,-50%) rotate(10deg);}
    75%{transform:translate(-50%,-50%) rotate(-10deg);}
    100%{transform:translate(-50%,-50%) rotate(0deg);}
  }

  /* modal final */
  .modal{
    position:absolute;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;
    opacity:0;pointer-events:none;transition:0.3s;
  }
  .modal.show{opacity:1;pointer-events:auto;}
  .card{
    background:linear-gradient(180deg,#fffef6,#f7edd6);border-radius:12px;padding:20px;text-align:center;box-shadow:0 20px 40px rgba(0,0,0,0.45);position:relative;
  }
  .card h1{margin:0;font-size:26px;color:#35200f;}
  .card p{margin:8px 0 12px;font-size:18px;}
  .movie{font-weight:800;color:#612e0d;margin-top:6px;font-size:16px;}
  .chest{position:absolute;bottom:0;left:50%;transform:translateX(-50%) scale(0);transition:0.5s;}
  .chest.open{transform:translateX(-50%) scale(1);}
  .hat, .whip{
    position:absolute;width:50px;height:50px;opacity:0;transition:0.6s;
  }
  .hat.show, .whip.show{opacity:1;transform:translateY(-20px);}
</style>
</head>
<body>
<div class="wrap">
  <div class="map-container">
    <div class="title">Mapa del Tesoro</div>
    <div class="instructions" id="instructions">
      <p>Explora el mapa y haz clic en los lugares que creas que esconden el tesoro.<br>Cuidado… algunos son trampas.</p>
      <button class="start-btn" id="startBtn">Comenzar la aventura</button>
    </div>

    <!-- hotspots -->
    <div class="hotspot" id="h1" style="left:20%;top:60%;">X</div>
    <div class="hotspot" id="h2" style="left:42%;top:42%;">X</div>
    <div class="hotspot" id="h3" style="left:65%;top:28%;">X</div>
    <div class="hotspot" id="h4" style="left:30%;top:30%;">X</div>
    <div class="hotspot" id="h5" style="left:55%;top:50%;">X</div>
    <div class="hotspot" id="h6" style="left:75%;top:60%;">X</div>

    <!-- modal final -->
    <div class="modal" id="modal">
      <div class="card">
        <h1>¡¡Vla, pasaste!!</h1>
        <p>¿Quieres ir al cine?</p>
        <div class="movie">Indiana Jones: Raiders of the Lost Ark</div>
        <img src="https://i.ibb.co/Jzd5F47/chest.png" class="chest" id="chest">
        <img src="https://i.ibb.co/3Y5vh6G/hat.png" class="hat" id="hat">
        <img src="https://i.ibb.co/5L5yYbb/whip.png" class="whip" id="whip">
      </div>
    </div>

  </div>
</div>

<!-- Sonidos en base64 para no depender de archivos externos -->
<audio id="bgMusic" loop>
  <source src="data:audio/mp3;base64,//uQxAAAAAAAAAAAA..." type="audio/mp3">
</audio>
<audio id="treasureSound">
  <source src="data:audio/mp3;base64,//uQxAAAAAAA..." type="audio/mp3">
</audio>
<audio id="trapSound">
  <source src="data:audio/mp3;base64,//uQxAAAAAAA..." type="audio/mp3">
</audio>

<script>
const startBtn = document.getElementById('startBtn');
const instructions = document.getElementById('instructions');
const bgMusic = document.getElementById('bgMusic');
const treasureSound = document.getElementById('treasureSound');
const trapSound = document.getElementById('trapSound');
const modal = document.getElementById('modal');
const chest = document.getElementById('chest');
const hat = document.getElementById('hat');
const whip = document.getElementById('whip');

let found = 0;
const correctIds = ['h1','h2','h3']; // correct X
const hotspots = document.querySelectorAll('.hotspot');

startBtn.addEventListener('click', ()=>{
  instructions.style.display='none';
  bgMusic.play();
});

hotspots.forEach(h=>{
  h.addEventListener('click', ()=>{
    if(h.classList.contains('found') || h.classList.contains('wrong')) return;
    if(correctIds.includes(h.id)){
      h.classList.add('found');
      treasureSound.play();
      found++;
      if(found===correctIds.length){
        // show modal
        modal.classList.add('show');
        chest.classList.add('open');
        setTimeout(()=>{hat.classList.add('show'); whip.classList.add('show');},800);
      }
    }else{
      h.classList.add('wrong');
      trapSound.play();
      setTimeout(()=> h.classList.remove('wrong'),500);
    }
  });
});
</script>
</body>
</html>
